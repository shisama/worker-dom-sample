<html amp>
    <head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.index.mjs" type="module"></script>
  <script src="https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.index.js" nomodule defer></script>
  <script src="https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.worker.js" nomodule defer></script>
    </head>
    <body>
        <div src="hello.js" id="hello">
            <div id="waiting">Waiting...</div>
        </div>
        <script type="module">
            import {upgradeElement} from 'https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.index.mjs';
            upgradeElement(document.getElementById('hello'), 'https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.worker.mjs');
        </script>
        
        <script nomodule async=false defer>
            document.addEventListener('DOMContentLoaded', function() {
                MainThread.upgradeElement(document.getElementById('hello'), 'https://unpkg.com/@ampproject/worker-dom@0.2.8/dist/unminified.worker.js');
            }, false);
        </script>
        
    </body>
</html>